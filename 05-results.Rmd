# Results

## Top 5 Cities with high avg rental prices (2020)

```{r, fig.width=20, fig.height=8}
library(dplyr)
library(tidyr)
library(ggplot2)

data <- read.csv("data.csv",header = TRUE, sep=",")


data$mean_2020 <- rowMeans(data[,c('X2020.01','X2020.02','X2020.03','X2020.04','X2020.05','X2020.06','X2020.07','X2020.08','X2020.09','X2020.10','X2020.11','X2020.12')], na.rm=TRUE)

data %>%
 filter(mean_2020 >= 2400L & mean_2020 <= 3040L) %>%
 ggplot() +
  aes(x = RegionName, weight = mean_2020) +
  geom_bar(fill = "#112446") +
  labs(
    x = "Cities",
    y = "Rental price",
    title = "Top 5 Cities with high avg rental prices (2020)"
  ) +
  theme_minimal(base_size = 30)
```

## Top 5 Cities with high avg rental prices (2021)

```{r, fig.width=20, fig.height=8}

data$mean_2021 <- rowMeans(data[,c('X2021.01','X2021.02','X2021.03','X2021.04','X2021.05','X2021.06','X2021.07','X2021.08','X2021.09','X2021.10')], na.rm=TRUE)

data %>%
 filter(mean_2021 >= 2499L) %>%
 ggplot() +
  aes(x = RegionName, weight = mean_2021) +
  geom_bar(fill = "#112446") +
  labs(
    x = "Cities",
    y = "Rental price",
    title = "Top 5 Cities with high avg rental prices (2021)"
  )+
  theme_minimal(base_size = 30)

```

When both plots are being compared, we observe that the top 5 rental price of both the years have been the same city. While we observe
only a marginal increase or decrease in Boston, New York, San Francisco, and San Jose, we observe a substantial increase in the rental price of the city Ventura, CA

## Histogram of NY Rental prices

```{r, fig.width=20, fig.height=8}

ny_data<-data %>%
  filter(RegionName=='New York, NY')
ny_data<-as.data.frame(t(ny_data))
ny_data<-as.data.frame(ny_data[-c(1, 2, 3),])
ny_data<-as.data.frame(as.numeric(unlist(ny_data)))


ggplot(ny_data) +
 aes(x = `as.numeric(unlist(ny_data))`) +
 geom_histogram(bins = 20L, fill = "#112446") +
 labs(x = "Rental Price", y = "Frequency", title = "Histogram of NY Rental prices (using monthwise mean)") +
 theme_minimal(base_size = 30)

```

## The change in NY Rental Prices for the same months (Comparing Year 2019 with 2020) 

```{r}

ny_data1<-data %>%
  filter(RegionName=='New York, NY')
ny_data1<-as.data.frame(t(ny_data1))
ny_data1<-as.data.frame(ny_data1[c(64:75),])
ny_data1<-as.data.frame(as.numeric(unlist(ny_data1)))
names(ny_data1)[names(ny_data1) == 'as.numeric(unlist(ny_data1))'] <- 'Price'

ny_data2<-data %>%
  filter(RegionName=='New York, NY')
ny_data2<-as.data.frame(t(ny_data2))
ny_data2<-as.data.frame(ny_data2[c(76:87),])
ny_data2<-as.data.frame(as.numeric(unlist(ny_data2)))
names(ny_data2)[names(ny_data2) == 'as.numeric(unlist(ny_data2))'] <- 'Price'

ny_data3<-ny_data2-ny_data1
monlab=c("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec")
ny_data3$label=factor(monlab, levels = monlab)
ny_data3 <- mutate(ny_data3, condition=if_else(Price>0, "Increase", "Decrease"))

ggplot(data=ny_data3,aes(x=label,y=Price, fill=condition))+
  labs(x = "Months", y = "Price")+
  geom_col(position = "identity")+
  theme(axis.text.x=element_text(angle=45, hjust=1))
```

While the usual trend remains increasing as years increase, there are some strange results obtained when comparing the year 2019 and 2020. Comparing the change in price for the same month with its previous year, we observe that the rental price have substantially decreased. This trend has never been observed in any of the previous years. The cause of this impact to most likely due to covid19.But during the recovery stages of COVID19 (November, December), we could observe that the reduction in prices have started decreasing.

## The change in NY Rental Prices for the same months (Comparing Year 2020 with 2021)
```{r}
ny_data1<-data %>%
  filter(RegionName=='New York, NY')
ny_data1<-as.data.frame(t(ny_data1))
ny_data1<-as.data.frame(ny_data1[c(76:85),])
ny_data1<-as.data.frame(as.numeric(unlist(ny_data1)))
names(ny_data1)[names(ny_data1) == 'as.numeric(unlist(ny_data1))'] <- 'Price'

ny_data2<-data %>%
  filter(RegionName=='New York, NY')
ny_data2<-as.data.frame(t(ny_data2))
ny_data2<-as.data.frame(ny_data2[c(88:97),])
ny_data2<-as.data.frame(as.numeric(unlist(ny_data2)))
names(ny_data2)[names(ny_data2) == 'as.numeric(unlist(ny_data2))'] <- 'Price'

ny_data3<-ny_data2-ny_data1
monlab=c("Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct")
ny_data3$label=factor(monlab, levels = monlab)
ny_data3 <- mutate(ny_data3, condition=if_else(Price>0, "Increase", "Decrease"))

ggplot(data=ny_data3,aes(x=label,y=Price, fill=condition))+
  labs(x = "Months", y = "Price")+
  geom_col(position = "identity")+
  theme(axis.text.x=element_text(angle=45, hjust=1))

```

When compared to the year 2020, we see the rental prices have started increasing. While the pandemic has made a huge negative impact on rental prices in the year 2020, it is clearly visible that the prices are marching back to normal and the trend seems to be carried for every next month as well. So, New York is marching towards the pre-pandemic normal.